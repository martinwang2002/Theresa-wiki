# The format is based on https://keepachangelog.com/en/1.0.0/
# eslint-disable max-lines
versions:
  - version: [0, 5, 4]
    date: 2023-02-19T08:00:00+0800
    contents:
      added:
        - global error probe
      fixed:
        - tile undefined probe
        - widget site link open in blank

  - version: [0, 5, 3]
    date: 2023-02-19T08:00:00+0800
    contents:
      added:
        - heading anchor copy link
      fixed:
        - map tile active ui

  - version: [0, 5, 2]
    date: 2023-02-12T08:00:00+0800
    contents:
      added:
        - revalidate widget scene
        - enemy race
        - enemy index
      fixed:
        - enemy avatar wrong url

  - version: [0, 5, 1]
    date: 2023-02-06T09:00:00+0800
    contents:
      fixed:
        - remove async mutex

  - version: [0, 5, 0]
    date: 2023-02-06T08:00:00+0800
    contents:
      added:
        - enemy radar and attributes
        - lru cache
      changed:
        - widget page ui change

  - version: [0, 4, 5]
    date: 2023-01-30T08:00:00+0800
    contents:
      added:
        - map tile tile_passable_wall_forbidden
      changed:
        - widget site icon update
        - api health and startup scripts
        - ranaming arknights descrption
      fixed:
        - offline title

  - version: [0, 4, 4]
    date: 2023-01-23T08:00:00+0800
    contents:
      added:
        - tile_stairs and tile_passable_wall
      fixed:
        - map3d load scene button missing on safari

  - version: [0, 4, 3]
    date: 2023-01-16T08:00:00+0800
    contents:
      added:
        - gtag probe on missing tiles
      fixed:
        - google analytics load order
        - hashtag scroll
        - stageInfoDescription <color=#ffffff> tag

  - version: [0, 4, 2]
    date: 2023-01-09T08:00:00+0800
    contents:
      added:
        - widget map scene add memory stages
        - tile deepwater and deepsea
        - send message to parent frame when there is error
      fixed:
        - opening settings drawer causes page scroll
        - service worker urlPattern with query parameters

  - version: [0, 4, 1]
    date: 2023-01-02T08:00:00+0800
    contents:
      added:
        - maa map widget with messenger @guansss (github PR \#2)
      fixed:
        - tile_reedf should be tileReedFloor instead of tileReedForbidden
        - activeTiles props error
        - climb tower return default zoneInfo for some invalid zones

  - version: [0, 4, 0]
    date: 2022-12-26T08:00:00+0800
    contents:
      added:
        - use git hash as build id
        - map scene tile (tile_reed, tile_reedf, tile_reedw, tile_mire)
      fixed:
        - map preview image size

  - version: [0, 3, 13]
    date: 2022-12-18T08:00:00+0800
    contents:
      fixed:
        - item image fill property

  - version: [0, 3, 12]
    date: 2022-12-12T08:00:00+0800
    contents:
      added:
        - tile_creep info

  - version: [0, 3, 11]
    date: 2022-12-05T08:00:00+0800
    contents:
      added:
        - widget docs

  - version: [0, 3, 10]
    date: 2022-11-28T08:00:00+0800
    contents:
      added:
        - widget page container
        - query parameter `theme` to set theme

  - version: [0, 3, 9]
    date: 2022-11-21T08:00:00+0800
    contents:
      added:
        - More icons for stageOptions
      changed:
        - use styledLink in /
      fixed:
        - map3d disable directional light shadow

  - version: [0, 3, 8]
    date: 2022-11-14T08:00:00+0800
    contents:
      changed:
        - /api/health to purge data

  - version: [0, 3, 7]
    date: 2022-11-07T08:00:00+0800
    contents:
      added:
        - nextjs ^13.0

  - version: [0, 3, 6]
    date: 2022-11-01T08:00:00+0800
    contents:
      added:
        - widget map scene

  - version: [0, 3, 5]
    date: 2022-10-24T08:00:00+0800
    contents:
      changed:
        - show client error on error page
        - mapPreview image container
        - bgmBank title
        - tile fence bound

  - version: [0, 3, 4]
    date: 2022-10-17T08:00:00+0800
    contents:
      changed:
        - map3d WebGLRenderer config
      fixed:
        - main stages rendering error
        - withTableOfContents hydration error in production

  - version: [0, 3, 3]
    date: 2022-10-10T08:00:00+0800
    contents:
      fixed:
        - rougelike stages missing due to new data structure

  - version: [0, 3, 2]
    date: 2022-10-03T08:00:00+0800
    contents:
      added:
        - map3d point light
        - map tile tile_telin and tile_telout

  - version: [0, 3, 1]
    date: 2022-09-26T08:00:00+0800
    contents:
      added:
        - map3d lights
        - map 3d rect light width and height

  - version: [0, 3, 0]
    date: 2022-09-19T08:00:00+0800
    contents:
      added:
        - map3d shadow (castShadow, receiveShadow)
      changed:
        - audioController circular process when loading
        - use emotion Global to inject font-face

  - version: [0, 2, 16]
    date: 2022-09-12T09:00:00+0800
    contents:
      changed:
        - static.theresa.wiki use CacheFirst strategy
        - map config data structure change

  - version: [0, 2, 15]
    date: 2022-09-05T09:00:00+0800
    contents:
      fixed:
        - eslint react/no-unknown-property rule

  - version: [0, 2, 14]
    date: 2022-09-05T08:00:00+0800
    contents:
      added:
        - tileHole and tileFence
      changed:
        - improve map tile display
      fixed:
        - tile svg like tooltip ref error
        - (map 3d) random generatation of world view tip on render

  - version: [0, 2, 13]
    date: 2022-08-29T08:00:00+0800
    contents:
      added:
        - use react 18

  - version: [0, 2, 12]
    date: 2022-08-22T08:00:00+0800
    contents:
      added:
        - audio controller supports multiple audio source, ogg and mp3
        - Item iamge use sprite
      changed:
        - map->stageInfo use styled

  - version: [0, 2, 11]
    date: 2022-08-15T08:00:00+0800
    contents:
      fixed:
        - mapPreview Dialog AppBar theme color
        - audioController play and pause icon not switched on load and play
        - audioController error when src is undefined

  - version: [0, 2, 10]
    date: 2022-08-08T08:00:00+0800
    contents:
      added:
        - (audio controller) lazy load audio
      fixed:
        - bgmBank might be null, fallback to default
        - 3d scene alphaTest for all transparent images

  - version: [0, 2, 9]
    date: 2022-08-01T08:00:00+0800
    contents:
      fixed:
        - tileInfo undefined error
        - notFound for isStoryOnly stages
        - service worker reload, snackbar not closed properly

  - version: [0, 2, 8]
    date: 2022-07-25T08:00:00+0800
    contents:
      added:
        - use audio/ogg format
      fixed:
        - error message for audio controller

  - version: [0, 2, 7]
    date: 2022-07-18T08:00:00+0800
    contents:
      fixed:
        - story only stages in unlock condition
        - audio player missing unmount of event handler

  - version: [0, 2, 6]
    date: 2022-07-11T08:00:00+0800
    contents:
      added:
        - audio player with slider
      fixed:
        - stageInfoDescription regex use reluctant match instead of greedy match

  - version: [0, 2, 5]
    date: 2022-07-04T08:00:00+0800
    contents:
      added:
        - audio player for map bgm event

  - version: [0, 2, 4]
    date: 2022-06-27T08:00:00+0800
    contents:
      added:
        - color mode (light, dark and system)
        - patched number
        - use Dream Han Serif CN font for title
        - service worker
        - about/ svg share
      changed:
        - open-source
        - use styled span for badges
        - index page ui (like arknights)
      fixed:
        - /about/changelog in dark mode
        - mui tip overflow
        - error message for loading map3d

  - version: [0, 2, 3]
    date: 2022-06-20T08:00:00+0800
    contents:
      added:
        - disable prefetch on footer links
        - improved zone name
        - use noto sans font
        - stage options table
      changed:
        - /about/credits use styled component
        - use serverRuntimeConfig for redis ex ttl
        - use mui app bar instead of bootstrap navbar
        - link textUnderlineOffset
        - used styled component in error component
      fixed:
        - docker /map missing data when startup
        - map3d load phase
        - site accessibility
        - docker build with i18n
        - scrollbar padding for app bar
        - emotion/react Global component causing css errors

  - version: [0, 2, 2]
    date: 2022-06-13T08:00:00+0800
    contents:
      added:
        - styled components
        - page footer with CC-BY-NC-SA license
        - map 3d loading user experience
        - bump deps
        - spider data-nosnippet and data-elastic-exclude
        - breadcrumb navigation
      changed:
        - page footer CC license display
      deprecated:
        - scss module
      fixed:
        - map use hooked level id from battle misc table
        - map 3d precise camera position
        - ioredis typescript error

  - version: [0, 2, 1]
    date: 2022-06-06T08:00:00+0800
    contents:
      added:
        - map3d Material bumpMap and bumpScale
        - map3d Material metallicGlossMap (metalnessMap)
          and glossiness (metalness)
        - map index display easy badge
        - about contact support crisp
        - about index page
        - map3d improve loading message
      changed:
        - map 3d changed await order to reduce latency
      fixed:
        - map preview use relative position for image's parent element
        - map 3d without texture (map)
        - map cannot load stage for permanent zones

  - version: [0, 2, 0]
    date: 2022-05-30T08:00:00+0800
    contents:
      added:
        - map3d Material
        - map3d emission (emissive) map
        - emission (emissive) color

  - version: [0, 1, 11]
    date: 2022-05-23T08:00:00+0800
    contents:
      added:
        - semantic versioning with `+branch_name` for non-master branch
        - Experimental 3D map scene
        - about page source-code
        - about page contact
      changed:
        - map/zone use display zone name

  - version: [0, 1, 10]
    date: 2022-05-15T09:00:00+0800
    contents:
      fixed:
        - env url (internal)

  - version: [0, 1, 9]
    date: 2022-05-15T08:00:00+0800
    contents:
      changed:
        - use next/image for Item component
      fixed:
        - Theresa image loading issue

  - version: [0, 1, 8]
    date: 2022-05-09T08:00:00+0800
    contents:
      added:
        - Theresa avg at /
        - Arkwaifu credits
      fixed:
        - No stages for permanent zone

  - version: [0, 1, 7]
    date: 2022-05-02T08:00:00+0800
    contents:
      added:
        - Full page display of stage preview image
      changed:
        - static api updates

  - version: [0, 1, 6]
    date: 2022-04-25T08:00:00+0800
    contents:
      changed:
        - Use svg title (no need to load font files)

  - version: [0, 1, 5]
    date: 2022-04-18T08:00:00+0800
    contents:
      changed:
        - Improved zone name in /map

  - version: [0, 1, 4]
    date: 2022-04-11T08:00:00+0800
    contents:
      added:
        - Table of Contents for /map

  - version: [0, 1, 3]
    date: 2022-04-04T08:00:00+0800
    contents:
      added:
        - Grouped stages
      fixed:
        - aria-label for placebo progress bar

  - version: [0, 1, 2]
    date: 2022-03-28T08:00:00+0800
    contents:
      added:
        - GA debug mode
        - credits English
      fixed:
        - changelog datetime string
        - missing image not found

  - version: [0, 1, 1]
    date: 2022-03-21T08:00:00+0800
    contents:
      added:
        - reduced imageSizes and deviceSizes in next.config.js > image
        - changelog UI
      changed:
        - Grid columns responsive
        - force close placebo after route finished
        - use next/link for Card
      fixed:
        - /map page build not found during yarn build
        - /map page build without data
        - LICENSES.txt not found error
        - filter isStoryOnly stages

  - version: [0, 1, 0]
    date: 2022-03-14T08:00:00+0800
    contents:
      added:
        - serverRuntimeConfig.NO_DYNAMIC_ROUTES
        - /map/[zoneId] page
        - / (index) page
        - /map page
        - Google Analytics
      changed:
        - Dockerfile build process
        - Use MapPreview with extra div and MapPreviewImage with pure image
      fixed:
        - _error page footer
        - /map page build data error during yarn build

  - version: [0, 0, 5]
    date: 2022-03-07T08:00:00+0800
    contents:
      added:
        - Table of Contents
        - meta tags for map/[zoneId]/[stageId]
      fixed:
        - map strict zoneId parameter (validation)
        - /about/changelog /about/privacy overflow to be hidden
        - emotion cache in page rendering
        - next no-document-import-in-page

  - version: [0, 0, 4]
    date: 2022-02-28T08:00:00+0800
    contents:
      added:
        - nextjs standalone mode
      changed:
        - "page: scrollbar color, hover color"
        - use changelog.yaml
        - scrollbar width 10px -> 8px, without border
      fixed:
        - "page: placebo rendered at server side"


  - version: [0, 0, 3]
    date: 2022-02-20T08:00:00+0800
    contents:
      added:
        - eslint jsonc
        - mappreview
        - scrollbar
      changed:
        - use uri-js to format url
        - use changelog version, instead of package.json version
      fixed:
        - Dockerfile yarn install network error, adding tolerance


  - version: [0, 0, 2]
    date: 2022-02-14T00:00:00+0000
    contents:
      added:
        - Minified favicon.svg
        - Component StageInfo
        - Docs for ENV THERESA_WIKI_NO_BUILD_DYNAMIC_ROUTES=False
      changed:
        - Dockerfile for gen-license
        - "Page: /map/[stageId] -> /map/[zoneId]/[stageId]"
      fixed:
        - redis typo
        - redis readonly


  - version: [0, 0, 1]
    date: 2022-01-17T00:00:00+0000
    contents:
      added:
        - Initial Release
        - favicon
        - map
        - " - tile"
        - " - stage info"
        - ""
        - 内容来源 (/about/credits) 内容许可与开源许可
        - 隐私权政策 (/about/privacy)
